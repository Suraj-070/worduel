{"ast":null,"code":"import{useEffect}from\"react\";import{useSocket}from\"../context/SocketContext\";import{useGame}from\"../context/GameContext\";export function useGameSocket(){const socket=useSocket();const{dispatch}=useGame();useEffect(()=>{if(!socket)return;socket.on(\"connect\",()=>{dispatch({type:\"SET_MY_ID\",payload:socket.id});});socket.on(\"waiting_for_opponent\",()=>{dispatch({type:\"WAITING\"});});socket.on(\"match_found\",data=>{dispatch({type:\"MATCH_FOUND\",payload:data});});socket.on(\"round_start\",data=>{dispatch({type:\"ROUND_START\",payload:data});});socket.on(\"hint_revealed\",data=>{dispatch({type:\"HINT_REVEALED\",payload:data});});socket.on(\"hint_already_used\",()=>{dispatch({type:\"HINT_ALREADY_USED\"});});socket.on(\"guess_result\",data=>{dispatch({type:\"GUESS_RESULT\",payload:data});if(data.isCorrect){// Fire custom event so Game.jsx can trigger animations\nwindow.dispatchEvent(new CustomEvent(\"round_correct\",{detail:{guessNumber:data.guessNumber,bonuses:data.bonuses||[],pointsEarned:data.pointsEarned}}));}});socket.on(\"opponent_guessed\",data=>{dispatch({type:\"OPPONENT_GUESSED\",payload:data});if(data.isCorrect&&data.scores){dispatch({type:\"UPDATE_SCORES\",payload:{scores:data.scores}});}});socket.on(\"round_end\",data=>{dispatch({type:\"ROUND_END\",payload:data});});socket.on(\"session_end\",data=>{dispatch({type:\"SESSION_END\",payload:data});});socket.on(\"opponent_disconnected\",()=>{alert(\"Your opponent disconnected.\");dispatch({type:\"RESET\"});});// Opponent temporarily disconnected\nsocket.on(\"opponent_disconnected_temp\",data=>{dispatch({type:\"OPPONENT_DISCONNECTED_TEMP\",payload:data});});// Reconnect countdown\nsocket.on(\"reconnect_countdown\",data=>{dispatch({type:\"RECONNECT_COUNTDOWN\",payload:data});});// Opponent reconnected\nsocket.on(\"opponent_reconnected\",data=>{dispatch({type:\"OPPONENT_RECONNECTED\",payload:data});});// Opponent forfeited\nsocket.on(\"opponent_forfeited\",data=>{dispatch({type:\"OPPONENT_FORFEITED\",payload:data});});// Rejoin success\nsocket.on(\"rejoin_success\",data=>{dispatch({type:\"REJOIN_SUCCESS\",payload:data});});// Rejoin failed\nsocket.on(\"rejoin_failed\",data=>{dispatch({type:\"REJOIN_FAILED\",payload:data});});socket.on(\"invalid_word\",data=>{dispatch({type:\"INVALID_WORD\"});});return()=>{socket.off(\"connect\");socket.off(\"waiting_for_opponent\");socket.off(\"match_found\");socket.off(\"round_start\");socket.off(\"guess_result\");socket.off(\"opponent_guessed\");socket.off(\"round_end\");socket.off(\"session_end\");socket.off(\"opponent_disconnected\");socket.off(\"invalid_word\");socket.off(\"hint_revealed\");socket.off(\"hint_already_used\");socket.off(\"opponent_disconnected_temp\");socket.off(\"reconnect_countdown\");socket.off(\"opponent_reconnected\");socket.off(\"opponent_forfeited\");socket.off(\"rejoin_success\");socket.off(\"rejoin_failed\");};},[socket,dispatch]);}","map":{"version":3,"names":["useEffect","useSocket","useGame","useGameSocket","socket","dispatch","on","type","payload","id","data","isCorrect","window","dispatchEvent","CustomEvent","detail","guessNumber","bonuses","pointsEarned","scores","alert","off"],"sources":["C:/Users/NITRO5/OneDrive/Desktop/worduel/client/src/hooks/useGameSocket.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useSocket } from \"../context/SocketContext\";\r\nimport { useGame } from \"../context/GameContext\";\r\n\r\nexport function useGameSocket() {\r\n  const socket = useSocket();\r\n  const { dispatch } = useGame();\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    socket.on(\"connect\", () => {\r\n      dispatch({ type: \"SET_MY_ID\", payload: socket.id });\r\n    });\r\n\r\n    socket.on(\"waiting_for_opponent\", () => {\r\n      dispatch({ type: \"WAITING\" });\r\n    });\r\n\r\n    socket.on(\"match_found\", (data) => {\r\n      dispatch({ type: \"MATCH_FOUND\", payload: data });\r\n    });\r\n\r\n    socket.on(\"round_start\", (data) => {\r\n      dispatch({ type: \"ROUND_START\", payload: data });\r\n    });\r\n\r\n    socket.on(\"hint_revealed\", (data) => {\r\n      dispatch({ type: \"HINT_REVEALED\", payload: data });\r\n    });\r\n\r\n    socket.on(\"hint_already_used\", () => {\r\n      dispatch({ type: \"HINT_ALREADY_USED\" });\r\n    });\r\n\r\n    socket.on(\"guess_result\", (data) => {\r\n      dispatch({ type: \"GUESS_RESULT\", payload: data });\r\n\r\n      if (data.isCorrect) {\r\n        // Fire custom event so Game.jsx can trigger animations\r\n        window.dispatchEvent(\r\n          new CustomEvent(\"round_correct\", {\r\n            detail: {\r\n              guessNumber: data.guessNumber,\r\n              bonuses: data.bonuses || [],\r\n              pointsEarned: data.pointsEarned,\r\n            },\r\n          }),\r\n        );\r\n      }\r\n    });\r\n\r\n    socket.on(\"opponent_guessed\", (data) => {\r\n      dispatch({ type: \"OPPONENT_GUESSED\", payload: data });\r\n      if (data.isCorrect && data.scores) {\r\n        dispatch({ type: \"UPDATE_SCORES\", payload: { scores: data.scores } });\r\n      }\r\n    });\r\n\r\n    socket.on(\"round_end\", (data) => {\r\n      dispatch({ type: \"ROUND_END\", payload: data });\r\n    });\r\n\r\n    socket.on(\"session_end\", (data) => {\r\n      dispatch({ type: \"SESSION_END\", payload: data });\r\n    });\r\n\r\n    socket.on(\"opponent_disconnected\", () => {\r\n      alert(\"Your opponent disconnected.\");\r\n      dispatch({ type: \"RESET\" });\r\n    });\r\n\r\n    // Opponent temporarily disconnected\r\n    socket.on(\"opponent_disconnected_temp\", (data) => {\r\n      dispatch({ type: \"OPPONENT_DISCONNECTED_TEMP\", payload: data });\r\n    });\r\n\r\n    // Reconnect countdown\r\n    socket.on(\"reconnect_countdown\", (data) => {\r\n      dispatch({ type: \"RECONNECT_COUNTDOWN\", payload: data });\r\n    });\r\n\r\n    // Opponent reconnected\r\n    socket.on(\"opponent_reconnected\", (data) => {\r\n      dispatch({ type: \"OPPONENT_RECONNECTED\", payload: data });\r\n    });\r\n\r\n    // Opponent forfeited\r\n    socket.on(\"opponent_forfeited\", (data) => {\r\n      dispatch({ type: \"OPPONENT_FORFEITED\", payload: data });\r\n    });\r\n\r\n    // Rejoin success\r\n    socket.on(\"rejoin_success\", (data) => {\r\n      dispatch({ type: \"REJOIN_SUCCESS\", payload: data });\r\n    });\r\n\r\n    // Rejoin failed\r\n    socket.on(\"rejoin_failed\", (data) => {\r\n      dispatch({ type: \"REJOIN_FAILED\", payload: data });\r\n    });\r\n\r\n    socket.on(\"invalid_word\", (data) => {\r\n      dispatch({ type: \"INVALID_WORD\" });\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"connect\");\r\n      socket.off(\"waiting_for_opponent\");\r\n      socket.off(\"match_found\");\r\n      socket.off(\"round_start\");\r\n      socket.off(\"guess_result\");\r\n      socket.off(\"opponent_guessed\");\r\n      socket.off(\"round_end\");\r\n      socket.off(\"session_end\");\r\n      socket.off(\"opponent_disconnected\");\r\n      socket.off(\"invalid_word\");\r\n      socket.off(\"hint_revealed\");\r\n      socket.off(\"hint_already_used\");\r\n      socket.off(\"opponent_disconnected_temp\");\r\n      socket.off(\"reconnect_countdown\");\r\n      socket.off(\"opponent_reconnected\");\r\n      socket.off(\"opponent_forfeited\");\r\n      socket.off(\"rejoin_success\");\r\n      socket.off(\"rejoin_failed\");\r\n    };\r\n  }, [socket, dispatch]);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}