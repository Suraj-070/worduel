{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from\"react\";import{io}from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";const SocketContext=/*#__PURE__*/createContext(null);export const SocketProvider=_ref=>{let{children}=_ref;const[socket,setSocket]=useState(null);useEffect(()=>{const s=io(process.env.NODE_ENV===\"production\"?\"https://worduel-server-l2j1.onrender.com\":\"http://localhost:4000\",{autoConnect:false,transports:[\"websocket\",\"polling\"]});setSocket(s);s.connect();return()=>s.disconnect();},[]);useEffect(()=>{if(!socket)return;// guard against null socket\nsocket.on(\"connect\",()=>{if(socket.id){sessionStorage.setItem(\"socketId\",socket.id);}});return()=>{socket.off(\"connect\");};},[socket]);return/*#__PURE__*/_jsx(SocketContext.Provider,{value:socket,children:children});};export const useSocket=()=>useContext(SocketContext);","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","io","jsx","_jsx","SocketContext","SocketProvider","_ref","children","socket","setSocket","s","process","env","NODE_ENV","autoConnect","transports","connect","disconnect","on","id","sessionStorage","setItem","off","Provider","value","useSocket"],"sources":["C:/Users/NITRO5/OneDrive/Desktop/worduel/client/src/context/SocketContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst SocketContext = createContext(null);\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const s = io(\r\n      process.env.NODE_ENV === \"production\"\r\n        ? \"https://worduel-server-l2j1.onrender.com\"\r\n        : \"http://localhost:4000\",\r\n      {\r\n        autoConnect: false,\r\n        transports: [\"websocket\", \"polling\"],\r\n      },\r\n    );\r\n    setSocket(s);\r\n    s.connect();\r\n    return () => s.disconnect();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n  if (!socket) return; // guard against null socket\r\n  \r\n  socket.on(\"connect\", () => {\r\n    if (socket.id) {\r\n      sessionStorage.setItem(\"socketId\", socket.id);\r\n    }\r\n  });\r\n\r\n  return () => {\r\n    socket.off(\"connect\");\r\n  };\r\n}, [socket]);\r\n\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>{children}</SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSocket = () => useContext(SocketContext);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7E,OAASC,EAAE,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtC,KAAM,CAAAC,aAAa,cAAGP,aAAa,CAAC,IAAI,CAAC,CAEzC,MAAO,MAAM,CAAAQ,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACzC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAE1CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,CAAC,CAAGT,EAAE,CACVU,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CACjC,0CAA0C,CAC1C,uBAAuB,CAC3B,CACEC,WAAW,CAAE,KAAK,CAClBC,UAAU,CAAE,CAAC,WAAW,CAAE,SAAS,CACrC,CACF,CAAC,CACDN,SAAS,CAACC,CAAC,CAAC,CACZA,CAAC,CAACM,OAAO,CAAC,CAAC,CACX,MAAO,IAAMN,CAAC,CAACO,UAAU,CAAC,CAAC,CAC7B,CAAC,CAAE,EAAE,CAAC,CAENlB,SAAS,CAAC,IAAM,CAChB,GAAI,CAACS,MAAM,CAAE,OAAQ;AAErBA,MAAM,CAACU,EAAE,CAAC,SAAS,CAAE,IAAM,CACzB,GAAIV,MAAM,CAACW,EAAE,CAAE,CACbC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAEb,MAAM,CAACW,EAAE,CAAC,CAC/C,CACF,CAAC,CAAC,CAEF,MAAO,IAAM,CACXX,MAAM,CAACc,GAAG,CAAC,SAAS,CAAC,CACvB,CAAC,CACH,CAAC,CAAE,CAACd,MAAM,CAAC,CAAC,CAGV,mBACEL,IAAA,CAACC,aAAa,CAACmB,QAAQ,EAACC,KAAK,CAAEhB,MAAO,CAAAD,QAAA,CAAEA,QAAQ,CAAyB,CAAC,CAE9E,CAAC,CAED,MAAO,MAAM,CAAAkB,SAAS,CAAGA,CAAA,GAAM3B,UAAU,CAACM,aAAa,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}